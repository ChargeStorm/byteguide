{% extends 'base.html' %}
{% block body %}
    <style type="text/css">
    img.resize {
        width: 80%;
        height: auto;
    }
    </style>
    <div class="container">
        <h3>How to upload documentation</h3>
        <hr />
        <h5>First register the project / module / package</h5>
        <div>
            First step is to register the project to get the key for uploading versions. Create a json file with the following content, name and description is mandatory.
        </div>
        <br>
        <pre>
    $ cat register.json
    {
        "name": "my-project",
        "description": "This is a sample project",
        "owner": "Ninad Mhatre",                  <-- metadata: Proj owner name
        "owner-email": "some.thing@other.com",    <-- metadata: Proj owner email
        "programming-lang": "Python",             <-- metadata: Major prog language
        "tags": ["python", "sample", "project"]   <-- metadata: Tags, for searching
    }


    $ curl -X POST -d @register.json \
        -H 'Content-Type: application/json' \
        http://10.249.1.12:8000//manage/register

    # This returns a JSON response
   {
        "message": "project ['my-project'] already registered!",  <-- response text
        "project": "my-project",                                  <-- registered proj name
        "unique-key": "b5eb5695-f10e-4f04-9a10-bd33a1b084c7"       <-- unique-key to use for uploading versions.
    }
    </pre>
        <h5>Upload version to project</h5>
        <div>
            <ol>
                <li>
                    Generate project documentation as html using your favorite tool (<b>the docs must have an index.html entrypoint file</b>)
                </li>
                <li>
                    Zip the documentation in the format <i>projectname-version</i>.zip (<b>the index.html file must be on the root level of the zip file and the name and version needs to be correctly set in the filename</b>)
                </li>
                <br>
                <pre>
$ cd my_project/docs

$ tree
(.venv) ~/projects/my-project/docs$ tree -L 1
    .
    ├── filekeeper.html
    ├── getconfig.html
    └── index.html        <-- This file must be there on root level

$ zip -r my-project-0.1.0.zip *
                </pre>
                <li>Upload the zip file</li>
                <pre>
$ curl -X POST -F "file=@my-project-0.1.0.zip" -F unique-key=b5eb5695-f10e-4f04-9a10-bd33a1b084c7 http://10.249.1.12:8000/manage/upload
                </pre>
                <br />
            </ol>
        </div>
        {% if copyright %}
            <hr>
            <footer>
                <div class="row">
                    <div class="col-lg-12">
                        <p>{{ copyright|safe }}</p>
                    </div>
                </div>
            </footer>
        {% endif %}
    </div>
{% endblock %}
